<div class="titlebar">
    <div class="column">
        <h1>Accounts</h1>
        <p>
            This is where you view and manage accounts associated with each institution.
        </p>
    </div>
    <div class="helper" helper="Add a new account.">
        <mat-icon
        (click)="add()"
        class="right big add-icon"
    >
        add
    </mat-icon>
    </div>
</div>
<div class="row wrap box-content">
@for(account of accounts; let i = $index; track account.id) {
<div class="column dropfile data-card-container" (fileDrop)="parseCSVFiles(account, $event)" [preventBodyDrop]="true" [id]="account.id">
    <div class="titlebar">
        <div>
            <h2 class="title md-truncate"><a [routerLink]="['/accounts', account.id]">{{account.name}}</a></h2>
            <div class="account-balance">{{ account.balance() | currency }}</div>
        </div>
        <div class="actions">
            <div class="helper" [attr.helper]="`View &quot;${account.name}&quot; details &amp; Transactions.`">
                <mat-icon
                    [routerLink]="['/accounts', account.id]"
                    class="preview-icon"
                >
                    visibility
                </mat-icon>
            </div>
            <div class="helper" [attr.helper]="`Upload transactions for &quot;${account.name}&quot;.`">
                <mat-icon
                    (upload)="parseCSVFiles(account, $event)"
                    class="upload upload-icon"
                >
                    upload
                </mat-icon>
            </div>
            <div class="helper" [attr.helper]="`Edit Account &quot;${account.name}&quot;.`">
                <mat-icon
                    (click)="edit(account)"
                    class="edit-icon"
                >
                    edit
                </mat-icon>
            </div>
            <div class="helper" [attr.helper]="`Delete Account &quot;${account.name}&quot;.`">
                <mat-icon
                    (click)="remove(account)"
                    class="delete-icon"
                >
                    delete
                </mat-icon>
            </div>
        </div>
    </div>
    <yaba-transaction-list
        [accountId]="account.id"
        [filters]="filters"
        [showFilters]="false"
        [showPaginate]="false"
        [truncate]="true"
        [editable]="false"
    ></yaba-transaction-list>
</div>
}
</div>
<errors [errors]="errors"></errors>
<yaba-account-form
    [account]="account"
    (cancel)="cancel()"
    (save)="save($event)"
    [ngClass]="{ 'ng-hide': !formVisible }"
    class="suave"></yaba-account-form>
